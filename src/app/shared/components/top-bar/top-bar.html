<div class="top-bar__container container">
    @if (authStateService.isAuth()) {
        @if (currentUser(); as user) {
            <button pButton text class="top-bar__signin-btn" (click)="menu.toggle($event)">
                <svg pButtonIcon icon="person" width="20" height="20"></svg>
                <span pButtonLabel>{{ user.name }}</span>
                <svg pButtonIcon icon="chevron-down" width="8" height="8"></svg>
            </button>
            <p-tieredmenu
                #menu
                [model]="menuItems"
                [popup]="true"
                styleClass="top-bar__user-menu"
            />
        } @else {
            <p-progressSpinner strokeWidth="4" class="top-bar__spinner"> </p-progressSpinner>
        }
    } @else {
        <button
            pButton
            text
            class="top-bar__signin-btn"
            (click)="loginDialogService.openLoginDialog()"
        >
            <svg pButtonIcon icon="person" width="20" height="20"></svg>
            <span pButtonLabel>Войти</span>
        </button>
        <div class="top-bar__separator">/</div>
        <button
            pButton
            text
            class="top-bar__register-btn"
            (click)="registerDialogService.openRegisterDialog()"
        >
            <span pButtonLabel>Регистрация</span>
        </button>
    }
    <button
        pButton
        class="top-bar__add-btn"
        [routerLink]="['/user/advert-add']"
        [disabled]="!authStateService.isAuth()"
    >
        <span pButtonLabel>Новое объявление</span>
        <svg pButtonIcon icon="plus" width="20" height="20"></svg>
    </button>
</div>
