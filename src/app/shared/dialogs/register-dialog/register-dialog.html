<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div>
        <input
            pInputText
            placeholder="Имя"
            formControlName="name"
            autocomplete="off"
            [invalid]="isControlInvalid('name')"
        />
        <app-control-error
            [form]="registerForm"
            controlName="name"
            [isSubmitted]="isSubmitted()"
        ></app-control-error>
    </div>
    <div class="mb-16">
        <input
            pInputText
            placeholder="Логин"
            formControlName="login"
            autocomplete="off"
            [invalid]="isControlInvalid('login')"
        />
        <app-control-error
            [form]="registerForm"
            controlName="login"
            [isSubmitted]="isSubmitted()"
        ></app-control-error>
    </div>
    <div>
        <app-password-input
            [control]="registerForm.controls.password"
            [isInvalid]="isControlInvalid('password')"
            [(isPasswordVisible)]="isPasswordVisible"
            placeholder="Пароль"
        ></app-password-input>
        <app-control-error
            [form]="registerForm"
            controlName="password"
            [isSubmitted]="isSubmitted()"
        ></app-control-error>
    </div>
    <div>
        <app-password-input
            [control]="registerForm.controls.confirmPassword"
            [isInvalid]="isControlInvalid('confirmPassword')"
            [(isPasswordVisible)]="isPasswordVisible"
            placeholder="Подтверждение пароля"
        ></app-password-input>
        <app-control-error
            [form]="registerForm"
            controlName="confirmPassword"
            [isSubmitted]="isSubmitted()"
        ></app-control-error>
    </div>
    @if (formError()) {
        <p-message
            [life]="3000"
            icon="pi pi-times-circle"
            severity="error"
            size="small"
            variant="simple"
            showTransitionOptions="400ms ease-out"
            hideTransitionOptions="400ms ease-out"
        >
            {{ formError() }}
        </p-message>
    }
    <button
        pButton
        type="submit"
        [label]="isLoading() ? 'Регистрация' : 'Зарегистрироваться'"
        [loading]="isLoading()"
        [disabled]="!isAllRequiredCompleted() || (isSubmitted() && registerForm.invalid)"
    ></button>
</form>
