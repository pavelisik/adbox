# ADBOX - доска объявлений

Веб-приложение на Angular, позволяющее просматривать размещенные объявления. Реализована возможность авторизации зарегистрированных пользователей.

## Установка и запуск проекта

1. Клонируйте репозиторий:

```bash
git clone https://github.com/pavelisik/adbox.git
```

2. Перейдите в директорию проекта:

```bash
cd adbox
```

3. Установите зависимости:

```bash
npm install
```

4. Запустите проект в режиме разработки:

```bash
npm start
```

5. Откройте приложение в браузере по адресу:

```
http://localhost:4200
```

## Структура проекта

Директория **core** - низкоуровневые сущности, необходимые для работы всего приложения:

- `auth` - необходимые для авторизации сервисы и интерфейсы доменов авторизации:
    - `auth.service` - общий сервис для авторизации и разлогинивания;
    - `auth.state.service` - сервис состояния авторизации, работа с токеном авторизации, синхронизация с cookie;
    - `user-profile.store.service` - сервис определения текущего пользователя.
- `guards` - защитники навигации:
    - `public.guard` - защитник, отмечающий route как публичный;
    - `auth.guard` - защитник для авторизованных и неавторизованных пользователей.
- `interceptors` - перехватчики запросов для авторизованных пользователей с добавлением токена авторизации.

Директория **infrastructure** - сервисы для работы с API, интерфейсы DTO и адаптеры преобразования интерфейсов из DTO в бизнес-домены:

- `advert` - объявления;
- `authorization` - авторизация;
- `categories` - категории;
- `comment` - комментарии;
- `images` - изображения для объявлений;
- `users` - пользователи.

Директория **pages** - компоненты отдельных страниц с интерфейсами бизнес-доменов:

- `advert` - страница отображения объявления по его id;
- `advert-add` - страница добавления нового объявления;
- `adverts-list` - страница с выводом всех объявлений (главная страница) или для вывода результатов поиска по объявлениям с различными фильтрами;
- `not-found` - страница для неопознанных адресов;
- `settings` - страница настроек авторизованного пользователя;
- `user-profile` - страница с объявлениями авторизованного пользователя.

Директория **shared** - универсальные компоненты бизнес-логики, диалоговые окна, layout-компоненты, директивы, пайпы, универсальные сервисы бизнес-логики:

- `components` - все универсальные компоненты:
    - `ad-grid` - компонент для вывода сетки объявлений;
    - `ad-grid-item` - компонент для вывода карточки одного объявления в сетке;
    - `image` - компонент для вывода превью изображения для карточки одного объявления;
    - `ad-sidebar-filters` - компонент для вывода сайдбара с фильтрами для страницы с объявлениями;
    - `ad-top-filters` - компонент для вывода панели фильтров сверху вывода объявлений;
    - `picked-filters` - компонент для вывода всех выбранных фильтров с возможностью их удаления;
    - `ad-title` - компонент для вывода заголовка страницы с объявлениями;
    - `breadcrumbs` - компонент для вывода хлебных крошек;
    - `image-gallery` - компонент для вывода галереи изображений на странице объявления;
    - `search-bar` - компонент для вывода верхней панели с формой поиска объявлений и фильтром категорий;
    - `svg-icon` - компонент-обертка для svg-иконок.
    - `top-bar` - компонент для вывода верхней панели с пользовательским меню.

- `dialogs` - компоненты диалоговых окон:
    - `info-dialog` - компонент для вывода простого диалогового окна с информацией;
    - `login-dialog` - компонент для вывода диалогового окна авторизации пользователя.

- `layouts` - переиспользуемые layout-компоненты:
    - `header` - компонент для вывода шапки;
    - `main-layout` - основной компонент для всех страниц.

- `pipes` - вспомогательные пайпы:
    - `adverts-count.pipe` - пайп для вывода числа объявлений с правильным склонением;
    - `date-format.pipe` - пайп для форматирования даты объявления;
    - `phone-format.pipe` - пайп для форматирования телефонного номера;
    - `price-format.pipe` - пайп для форматирования цены;
    - `image-from-id.pipe` - асинхронный пайп для получения blob изображения по переданному id изображения;
    - `images-from-ids.pipe` - асинхронный пайп для получения массива blob изображений по переданному массиву id изображений (для галереи).

- `services` - все сервисы, необходимые для работы страниц, компонентов, диалоговых окон:
    - `advert.service` - сервис для работы с объявлениями;
    - `breadcrumbs.service` - сервис для формирования хлебных крошек;
    - `category.service` - сервис для работы с категориями;
    - `image.service` - сервис для работы с изображениями;
    - `info-dialog.service` - сервис для информационного диалогового окна;
    - `login-dialog.service` - сервис для диалогового окна авторизации.

- `utils` - утилитарные вспомогательные функции:
    - `categories-transform.util` - преобразует массив категорий в дерево с вложенными childs;
    - `find-category-from-id.util` - функция для поиска категории по id в модифицированном древовидном массиве.
